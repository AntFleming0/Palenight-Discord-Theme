:root {
    container-name: root;
    --custom-guild-list-padding: 12px;
    --panel-backdrop-filter: none;

    --border-hover: var(--border-subtle);
    
    /* VSCode-like subtle border radius - less rounded than default */
    --radius-xs: 2px;
    --radius-sm: 3px;
    --radius-md: 4px;
    --radius-lg: 4px; /* VSCode uses very subtle corners */
}

body {
    container-name: body;

    /* font, uses Consolas like VSCode - change to '' for default discord font */
    --font: 'Consolas', 'Courier New', monospace;
    --code-font: 'Consolas', 'Courier New', monospace;

    /* sizes */
    --gap: 8px; /* tighter spacing like VSCode */
    --divider-thickness: 2px; /* thinner dividers like VSCode */
    --border-thickness: 1px; /* thickness of borders around main panels. DOES NOT AFFECT OTHER BORDERS */
    --custom-guild-list-width: calc(var(--guildbar-avatar-size) + var(--custom-guild-list-padding) * 2 + var(--border-thickness) * 2);

    --border-hover-transition: 0.2s ease;
    
    /* VSCode Palenight background colors defined early for Discord */
    --bg-1: #32374C;
    --bg-2: #31364a;
    --bg-3: #25293A;
    --bg-4: #292D3E;
}

.visual-refresh {
    /* panel separation */
    .guilds__5e434 /* server list */, 
    .sidebarList__5e434 /* channel list (includes dm list) */,
    .panels__5e434 /* user panel */,
    .chat_f75fb0 > .subtitleContainer_f75fb0 /* chat titlebar */,
    .chatContent_f75fb0 /* chat */,
    .container_c8ffbb /* member list */,
    .content_f75fb0 > .membersWrap_c8ffbb /* forum post member list */,
    .container__133bf > .container__9293f /* friends titlebar */,
    .container_f391e3 > .container__9293f /* message requests titlebar */,
    .homeWrapper__0920e > .container__9293f /* nitro page titlebar */,
    .container__01ae2 > .container__9293f /* vc chat titlebar */,
    .container_fb64c9 > .container__9293f /* new thread panel */,
    .peopleColumn__133bf /* online friends */,
    .nowPlayingColumn__133bf /* active now */,
    .scroller_c880e8 /* nitro page */,
    .container_f391e3 > .content_f75fb0 /* message requests */,
    .shop__6db1d /* shop */,
    .content_f75fb0 > .outer_c0bea0 /* dm user panel */,
    .searchResultsWrap_a9e706 /* search results */,
    .container_f369db /* forum */,
    .chat_fb64c9 /* new thread panel */,
    .container_a592e1 /* server discovery */,
    .callContainer_cb9592 /* vc container */,
    .wrapper_cb9592.sidebarOpen_cb9592 .callContainer_cb9592 /* vc container when chat open */,
    .callContainer__722ff /* stage */,
    .chat_f75fb0 > .header_c791b2 /* server members header */,
    .chat_f75fb0 > .scrollerBase_d125d2 /* server members page */,
    .chat_f75fb0 > .header__0b563  /* server channels and roles header */,
    .chat_f75fb0 > .container__0b563 /* server channels and roles page */ {
        background-color: var(--background-base-lower);
        border-radius: var(--radius-lg);
        border: var(--border-thickness) solid var(--border-subtle);
        backdrop-filter: var(--panel-backdrop-filter);
        box-sizing: border-box;
        transition: border-color var(--border-hover-transition);

        &:hover {
            border-color: var(--border-hover);
        }
    }

    .panels__5e434 /* user panel */ {
        bottom: 0;
        left: 0;
        width: 100%;
    }

    .sidebar__5e434 /* server list + channel list + user panel group */ {
        margin: 0 var(--gap) var(--gap) var(--gap);
    }

    .guilds__5e434 /* server list */ {
        margin-bottom: calc(var(--custom-app-panels-height, 0) + var(--gap));
        margin-right: var(--gap);
    }
    .guilds__5e434 + div:not(.sidebarList__5e434) /* betterfolders */ {
        width: 100% !important;
    }
    .scroller_ef3116 /* server list inner scroller */ {
        padding: var(--custom-guild-list-padding) 0;
    }
    .folderGroup__48112 {
        width: 100%;
    }
    .listItem__650eb {
        width: 100%;
    }

    .sidebarList__5e434 /* channel list */ {
        margin-bottom: calc(var(--custom-app-panels-height, 0) + var(--gap));
    }
    .container__2637a /* channel list inner */ {
        padding-bottom: 0;
    }
    .clickable_f37cb1,
    .container__2637a /* channel list inner */,
    .header_f37cb1 /* server name */ {
        background: none;
    }
    .scroller__629e4 /* channel list inner scroller */ {
        margin-bottom: 0;
    }

    /* fix discord's idiotic server banners */
    .bannerImage_f37cb1,
    .bannerImg_f37cb1 {
        width: 100%;
    }
    .bannerVisible_f37cb1 .headerEllipseBackdrop_f37cb1 {
        display: none;
    }
    .headerGlass_f37cb1 {
        top: 0;
        left: 0;
        right: 0;
        width: auto;
        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    .sidebar__5e434:after /* server list + channel list bottom shadow */ {
        display: none;
    }

    .wrapper_ef3116 /* remove server list shadow */ {
        mask: none;
    }

    .chat_f75fb0 /* chat group outer */ {
        border: none !important;
        background: none;
    }
    .chatContent_f75fb0 {
        overflow: hidden;
    }
    .container__133bf /* friends page group outer */,
    .page__5e434 {
        padding-bottom: var(--gap);
        padding-right: var(--gap);
        border: none !important;
        background: none;
    }
    .page__5e434 > .chat_f75fb0,
    .page__5e434 > .container__133bf {
        padding: 0;
    }

    .container__9293f /* friends, message requests, + other stuff titlebar */ {
        margin-bottom: var(--gap);
    }

    .subtitleContainer_f75fb0 /* chat titlebar  */ {
        margin-bottom: var(--gap);
    }
    .title_f75fb0 /* chat titlebar inner */ {
        border: none;
        background: none;
        margin-bottom: 0;
    }

    .page__5e434 > div > .chat_f75fb0 > .content_f75fb0 /* chat outer */ {
        border-left: none;
    }
    .tabBody__133bf /* friends page */ {
        border: none !important;
    }

    .listeningAlong_e0cf27 /* user panel listening along */ {
        border-top: none !important;
    }

    .container_c8ffbb /* member list */ {
        margin-left: var(--gap);
        overflow: hidden;
        height: auto;
        min-width: fit-content;
    }
    .content_f75fb0 > .membersWrap_c8ffbb /* forum post member list */ {
        margin-left: var(--gap);
        overflow: hidden;
        height: auto;
        min-width: fit-content;
    }
    .members_c8ffbb /* member list inner */,
    .member_c8ffbb /* member list item */ {
        background: none;
    }

    .resizeHandle__01ae2 /* resize handle */ {
        background: transparent;
    }

    .privateChannels_e6b769 /* dm list */,
    .scroller__99e7c /* dm list inner */ {
        background: none;
    }
    .scroller__99e7c /* dm list inner */ {
        margin-bottom: 0;
    }

    .tabBody__133bf /* online friends + active now group outer */ {
        background: none;
    }

    .nowPlayingColumn__133bf /* active now */ {
        margin-left: var(--gap);
        background: var(--bg-3) !important;
    }
    .container__7d20c /* active now inner */ {
        background: var(--bg-3) !important;
    }
    .scroller__7d20c /* active now inner */ {
        border: none;
        background: var(--bg-3) !important;
    }

    /* Active Now - Activity cards and content */
    .itemCard__3f24e,
    .activity__46207,
    [class*="itemCard"],
    [class*="activity"] {
        background: var(--bg-2) !important;
        border: 1px solid var(--border) !important;
        border-radius: var(--radius-md) !important;
    }

    /* Active Now - Text styling */
    .itemCard__3f24e .title__48d42,
    .itemCard__3f24e .subtitle__8c7cd,
    .activity__46207 .activityName__5d60b,
    [class*="itemCard"] [class*="title"],
    [class*="activity"] [class*="name"] {
        color: var(--text-0) !important;
    }

    /* Active Now - Secondary text */
    .itemCard__3f24e .details__56434,
    [class*="itemCard"] [class*="details"],
    [class*="activity"] [class*="details"] {
        color: var(--text-1) !important;
    }

    /* Active Now - Section header */
    .section__7e80f,
    [class*="section"] h2,
    .nowPlayingColumn__133bf h2 {
        color: var(--text-0) !important;
    }

    .homeWrapper__0920e /* nitro page group inner */ {
        border: none;
        background: none;
    }
    .applicationStore_f07d62 /* nitro page group outer */ {
        background: none;
    }

    .shop__6db1d /* shop */ {
        overflow: hidden;
        height: auto;
    }
    .shop__08415 /* shop inner scroller */ {
        margin-top: calc(var(--custom-channel-header-height) * -1 - 16px);
    }

    .content_f75fb0 > .outer_c0bea0 /* dm user panel */ {
        margin-left: var(--gap);
        overflow: hidden;
        height: auto;
        min-width: 340px;
        background-position: center calc(-1 * var(--border-thickness));
        background-size: 100% calc(100% + 2 * var(--border-thickness));
    }

    .searchResultsWrap_a9e706 /* search results */ {
        margin-left: var(--gap);
    }

    .notice__6e2b9 /* notice banner */ {
        margin: 0 var(--gap) var(--gap) 0;
        border-radius: var(--radius-md);
        box-sizing: border-box;
        height: 40px;
    }

    .container__01ae2 /* vc chat + titlebar group */ {
        border: none;
        background: none;
    }
    .chat_a44415::before /* vc chat shadow */ {
        display: none;
    }
    .channelChatWrapper_cb9592 /* vc chat + titlebar group outer */ {
        background: none;
    }

    .page__5e434 > div > .chatLayerWrapper__01ae2 /* forum/thread chat outer */ {
        margin: 0 var(--gap) var(--gap) 0;
        height: calc(100% - var(--gap));
    }
    .container__01ae2 /* forum/thread chat */ {
        padding-left: calc((var(--gap) - var(--chat-resize-handle-width)));
    }

    .container_fb64c9 /* new thread panel */ {
        background: none;
    }
    .chat_fb64c9::before /* new thread panel chat shadow */ {
        display: none;
    }

    .container_a592e1 /* server discovery */ {
        overflow: hidden;
    }
    .backdrop__8a7fc /* server discovery top bar */ {
        background-color: var(--background-base-lower);
    }

    .wrapper_cb9592 /* dm vc wrapper */ {
        background: none;
        margin-bottom: var(--gap);
    }
    .wrapper_cb9592.fullScreen_cb9592 {
        margin-top: var(--gap);
        margin-left: var(--gap);
        width: calc(100% - var(--gap));
        height: calc(100% - var(--gap));
    }

    /* remove excess background from settings  */
    .standardSidebarView__23e6b,
    .contentRegion__23e6b,
    .sidebarRegionScroller__23e6b,
    .contentRegionScroller__23e6b {
        background: none;
    }
    .standardSidebarView__23e6b {
        backdrop-filter: var(--panel-backdrop-filter);
    }

    /* remove excess backgrounds */
    .wrapper__0d1ef /* message loading placeholders */,
    .wrapper__0d1ef > .wrapper_fc8177 {
        background: none;
    }
    .page__5e434 > .chat_f75fb0 /* friend page, server members page */ {
        background: none !important;
    }

    .newMessagesBar__0f481 /* unread messages bar */ {
        top: 12px;
        left: 12px;
        right: 12px;
        border-radius: var(--radius-sm);
        padding: 0 8px;
    }

    .bottom__7aaec /* channel list new unreads pill */,
    .unreadBottom__629e4 /* channel list non-community unread pill */ {
        bottom: 0;
    }

    .unreadMentionsIndicatorBottom_ef3116 /* server list new pill */,
    .unreadMentionsIndicatorTop_ef3116 {
        width: calc(var(--guildbar-avatar-size) + var(--custom-guild-list-padding) * 2);
        padding: calc(var(--custom-guild-list-padding) / 2);
    }

    /* Notification badges and indicators - Palenight colors */
    .numberBadge_e5445c /* notification badge */,
    .base__3e6af /* badge base */,
    [class*="numberBadge"],
    [class*="mentionsBadge"] {
        background-color: var(--palenight-purple) !important;
        color: var(--text-0) !important;
    }

    /* Unread indicators */
    .unreadMentionsIndicatorBottom_ef3116,
    .unreadMentionsIndicatorTop_ef3116,
    .unreadMentionsBar_e5445c,
    [class*="unreadMentionsIndicator"] {
        color: var(--palenight-purple) !important;
    }

    #vc-spotify-player /* vencord spotify plugin */ {
        background: none;
    }

    /* general chat bar improvements */
    .channelTextArea_f75fb0 /* chat bar */ {
        border-radius: var(--radius-md);
    }
    .themedBackground__74017 /* chat bar inner */ {
        background: none;
    }
    .slateTextArea_ec4baf /* actual typing area */ {
        margin-left: 2px;
    }

    /* improve unread divider */
    .divider__908e2 {
        border-width: var(--divider-thickness);
        border-radius: var(--divider-thickness);
    }
    .endCap__908e2 {
        margin-top: calc(var(--divider-thickness) / -2);
    }
    .divider__908e2 .content__908e2 {
        margin-top: calc(var(--divider-thickness) - var(--divider-thickness) * 2);
    }

    /* improve highlight message left edge */
    .message__5126c.mentioned__5126c::before,
    .replying__5126c::before,
    .ephemeral__5126c::before {
        width: var(--divider-thickness);
        border-radius: var(--divider-thickness);
        height: calc(100% - 2 * var(--radius-sm));
        top: var(--radius-sm);
        left: calc(var(--divider-thickness) / -2 + 1px);
        left: calc(var(--radius-sm) / 2);
    }

    .message__5126c {
        border-radius: var(--radius-md);
        margin-left: 4px;
    }

    /* improve server selected marker */
    .pill_e5445c.wrapper__58105 {
        width: calc((var(--custom-guild-list-padding) - 4px) / 2 + 4px);
    }
    .item__58105 {
        width: 4px;
        border-radius: 4px;
        margin-left: calc((var(--custom-guild-list-padding) - 4px) / 2);
    }

    /* improve embeds */
    .embedFull__623de {
        border: 4px solid var(--border-normal);
        border-top-color: var(--border-subtle) !important;
        border-top-width: 1px;
        border-bottom-color: var(--border-subtle) !important;
        border-bottom-width: 1px;
        border-right-color: var(--border-subtle) !important;
        border-right-width: 1px;
    }

    /* improve borders */
    .reaction__23977 /* message reactions */,
    .reactionBtn__23977.forceShow__23977 /* add reaction button */ {
        border-width: 2px;
    }

    /* roundness */
    .embedFull__623de /* embeds */,
    .hljs /* code block */,
    .imageWrapper_af017a /* image */,
    .container__9271d /* thread link */ {
        border-radius: var(--radius-md);
    }

    .outer_c0bea0 /* profile outer */, 
    .contentWrapper__08434  /* gif panel */ {
        border-radius: var(--radius-lg);
    }
    .inner_c0bea0 /* profile inner */ {
        border-radius: calc(var(--radius-lg) - 4px);
    }

    .outer_c0bea0 /* profile outer */ {
        border: 1px solid var(--border-subtle);
        background-position: center calc(-1 * var(--border-thickness));
        background-size: 100% calc(100% + 2 * var(--border-thickness));
    }
    .root__24502 {
        background: none;
    }

    /* remove unnecessary backgrounds */
    .app__160d8,
    #app-mount,
    body {
        background: transparent !important;
    }
    
    /* Set the base Discord background to match VSCode Palenight */
    #app-mount .bg__960e4 {
        background-color: var(--bg-4) !important; /* #292D3E */
    }
}

body {
    --font-primary: var(--font), 'gg sans';
    --font-display: var(--font), 'gg sans';
    --font-code: var(--code-font), 'gg mono';
}

[class*='scroll'] {
    will-change: scroll-position;
}
.burstGlow__23977 {
    display: none;
}

/* Plugin Compatibility Fixes */

/* ReadAllNotificationsButton Plugin - Fix button text size and styling */
#app-mount [class*="_readallnotificationsbuttonbutton"] {
    font-size: 10px !important; /* Smaller font to fit "read all" text */
    padding: 4px 6px !important;
    min-width: auto !important;
    width: auto !important;
    height: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: var(--text-3) !important;
    background: var(--bg-3) !important;
    border: 1px solid var(--border) !important;
    border-radius: 4px !important;
    transition: all 0.2s ease !important;
}

#app-mount [class*="_readallnotificationsbuttonbutton"]:hover {
    color: var(--text-1) !important;
    background: var(--hover) !important;
    border-color: var(--palenight-purple) !important;
}

#app-mount [class*="_readallnotificationsbuttonbutton"]:active {
    background: var(--active-2) !important;
    border-color: var(--palenight-purple) !important;
    transform: scale(0.95) !important;
}

#app-mount [class*="_readallnotificationsbuttonframe"] {
    --guildbar-avatar-size: 48px;
    margin-bottom: var(--gap, 8px) !important;
}

#app-mount [class*="_readallnotificationsbuttoninner"] {
    height: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* ============================================= */
/* STATUS INDICATORS - Midnight Pattern         */
/* ============================================= */

/* Change all status indicators to rounded squares */
svg rect[mask*='status'],
foreignObject rect,
rect[width='10'][height='10'],
rect[width='8'][height='8'],
rect[width='16'][height='16'] {
    rx: 3 !important;
    ry: 3 !important;
}

/* Offline Status - Gray */
rect[fill='#82838b'] {
    fill: var(--offline);
}
.status_a423bd[style='background-color: rgb(130, 131, 139);'] {
    background-color: var(--offline) !important;
    border-radius: 3px !important;
}

/* Online Status - Green */
rect[fill='#43a25a'],
path[fill='#43a25a'],
path[fill='var(--status-positive)'] {
    fill: var(--online);
}
.status_a423bd[style='background-color: rgb(67, 162, 90);'] {
    background-color: var(--online) !important;
    border-radius: 3px !important;
}

/* Idle/Away Status - Yellow */
rect[fill='#ca9654'] {
    fill: var(--idle);
}
.status_a423bd[style='background-color: rgb(202, 150, 84);'] {
    background-color: var(--idle) !important;
    border-radius: 3px !important;
}

/* DND Status - Red */
rect[fill='#d83a42'] {
    fill: var(--dnd);
}
.status_a423bd[style='background-color: rgb(216, 58, 66);'] {
    background-color: var(--dnd) !important;
    border-radius: 3px !important;
}

/* Streaming Status - Purple */
rect[fill='#9147ff'] {
    fill: var(--streaming);
}

/* Status activity indicators */
div[style='display: flex; justify-content: center; align-items: center; border-radius: 5px; background-color: rgb(67, 162, 90); height: 10px; width: 25px;'] {
    background-color: var(--online) !important;
}

/* ============================================= */
/* CUSTOM LOADING SCREEN - Palenight            */
/* ============================================= */

/* Loading screen background - match Palenight theme */
.appMount_fbb6aa {
    background: var(--bg-4) !important;
}

.content_a2f514 {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 20px !important;
}

/* Hide default Discord spinner */
.content_a2f514 > .spinner_a2f514 {
    display: none !important;
}

/* Add custom Palenight ASCII logo */
.content_a2f514::before {
    display: block !important;
    content: '    ____        __           _       __    __\A   / __ \\____ _/ /__  ____  (_)___ _/ /_  / /_\A  / /_/ / __ `/ / _ \\/ __ \\/ / __ `/ __ \\/ __/\A / ____/ /_/ / /  __/ / / / / /_/ / / / / /_  \A/_/    \\__,_/_/\\___/_/ /_/_/\\__, /_/ /_/\\__/  \A                            /____/              ' !important;
    font-size: 18px !important;
    font-family: monospace !important;
    white-space: pre !important;
    line-height: 1.2 !important;
    background: linear-gradient(to right, var(--palenight-purple) 0%, var(--palenight-blue) 25%, var(--palenight-cyan) 75%, var(--palenight-purple) 100%) !important;
    background-clip: text !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-size: 200% auto !important;
    animation: palenight-loading-shine 1.5s linear infinite reverse !important;
}

/* Keep loading text visible */
.text_a2f514 {
    position: static !important;
    color: var(--text-1) !important;
}

@keyframes palenight-loading-shine {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    50.0001% {
        background-position: -100%, 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Settings Page Theme Extension */
.layers__050b9 /* settings container */,
.container__aa8da /* settings container */,
.container_fa2c6c /* settings modal */,
[class*="settingsContainer"],
.settingsContainer_c907f8 {
    background: var(--bg-4) !important;
    color: var(--text-1) !important;
}

/* Settings sidebar */
.sidebarRegion__11fa4 /* settings sidebar */,
.side_aa8da2 /* settings side */,
[class*="sidebarRegion"],
[class*="settingsSidebar"] {
    background: var(--bg-3) !important;
    border-right: var(--border-thickness) solid var(--border) !important;
}

/* Settings items and groups */
.side_aa8da2 .item_aa8da2 /* settings item */,
[class*="settingsItem"],
.item_aa8da2 {
    color: var(--text-3) !important;
    background: transparent !important;
    border-radius: var(--radius-sm) !important;
    transition: all 0.2s ease !important;
}

.side_aa8da2 .item_aa8da2:hover /* settings item hover */,
[class*="settingsItem"]:hover {
    color: var(--text-1) !important;
    background: var(--hover) !important;
}

.side_aa8da2 .item_aa8da2.selected_aa8da2 /* settings item selected */,
[class*="settingsItem"][class*="selected"] {
    color: var(--text-1) !important;
    background: var(--active-2) !important;
    border-left: 2px solid var(--palenight-purple) !important;
    padding-left: calc(16px - 2px) !important;
}

/* Settings content */
[class*="standardSidebarView"],
.content_f0dbb1 /* settings content */ {
    background: var(--bg-4) !important;
    color: var(--text-3) !important;
}

/* Settings headers and titles */
.ui-standard-sidebar-view [class*="content"] h1,
.ui-standard-sidebar-view [class*="content"] h2,
.title__4b10a /* settings title */ {
    color: var(--text-1) !important;
}

/* Settings inputs and form elements */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
select,
textarea,
[class*="input"],
[class*="input"] input {
    background: var(--bg-3) !important;
    color: var(--text-1) !important;
    border: var(--border-thickness) solid var(--border) !important;
    border-radius: var(--radius-sm) !important;
}

input[type="text"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
input[type="number"]:focus,
select:focus,
textarea:focus,
[class*="input"] input:focus {
    border-color: var(--palenight-purple) !important;
    box-shadow: 0 0 0 2px var(--active-2) !important;
}

/* Settings buttons */
[class*="settingsButton"],
.button_dd4f85 /* settings button */ {
    background: var(--active) !important;
    color: var(--text-1) !important;
    border: 1px solid var(--palenight-purple) !important;
    border-radius: var(--radius-sm) !important;
    transition: all 0.2s ease !important;
}

[class*="settingsButton"]:hover,
.button_dd4f85:hover {
    background: var(--accent-4) !important;
    box-shadow: 0 0 8px var(--active-2) !important;
}

/* Settings dividers and separators */
hr,
[class*="divider"],
.divider__95f7f {
    border-color: var(--border) !important;
}

/* ============================================= */
/* BETTERDISCORD SETTINGS FIX                   */
/* ============================================= */

/* BetterDiscord settings container */
#bd-settingspane-container {
    background: var(--bg-4) !important;
}

/* BetterDiscord settings titles (Themes, Plugins, etc.) - FIX BLACK TEXT */
#bd-settingspane-container h2,
#bd-settingspane-container .bd-settings-title,
.bd-settings-title,
.bd-addon-list .bd-addon-header,
.bd-settings-group h2,
#bd-settingspane-container .bd-addon-views .bd-view-button.selected,
.bd-addon-views .bd-view-button {
    color: var(--text-1) !important;
    background: transparent !important;
}

/* BetterDiscord view buttons hover */
.bd-addon-views .bd-view-button:hover {
    background: var(--hover) !important;
}

.bd-addon-views .bd-view-button.selected {
    background: var(--active-2) !important;
    color: var(--text-0) !important;
}

/* BetterDiscord search bar - FIX BLACK OUTLINE */
#bd-settingspane-container .bd-search-wrapper,
.bd-search-wrapper {
    background: var(--bg-3) !important;
    border: var(--border-thickness) solid var(--border) !important;
    border-radius: var(--radius-sm) !important;
}

#bd-settingspane-container .bd-search-wrapper input,
.bd-search-wrapper input,
input[placeholder*="Search"],
input[placeholder*="search"] {
    background: transparent !important;
    color: var(--text-1) !important;
    border: none !important;
    border-radius: var(--radius-sm) !important;
}

#bd-settingspane-container .bd-search-wrapper input:focus,
.bd-search-wrapper input:focus,
#bd-settingspane-container .bd-search-wrapper:focus-within,
.bd-search-wrapper:focus-within {
    border-color: var(--palenight-purple) !important;
    box-shadow: 0 0 0 2px var(--active-2) !important;
    outline: none !important;
}

/* BetterDiscord search icon */
.bd-search-wrapper svg {
    color: var(--text-4) !important;
}

/* BetterDiscord addon cards */
.bd-addon-card {
    background: var(--bg-3) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius-md) !important;
}

/* BetterDiscord addon titles and descriptions */
.bd-addon-card .bd-title,
.bd-addon-card .bd-name {
    color: var(--text-1) !important;
}

.bd-addon-card .bd-description,
.bd-addon-card .bd-description-wrap {
    color: var(--text-3) !important;
}

/* BetterDiscord addon authors and version */
.bd-addon-card .bd-author,
.bd-addon-card .bd-version {
    color: var(--text-4) !important;
}

/* BetterDiscord switches */
.bd-switch,
.bd-switch-body {
    background: var(--bg-2) !important;
    border: 1px solid var(--border) !important;
}

.bd-switch input:checked + .bd-switch-body {
    background: var(--palenight-purple) !important;
    border-color: var(--palenight-purple) !important;
}

.bd-switch-handle {
    background: var(--text-0) !important;
}

/* BetterDiscord buttons */
.bd-button {
    background: var(--active) !important;
    color: var(--text-1) !important;
    border: 1px solid var(--palenight-purple) !important;
}

.bd-button:hover {
    background: var(--accent-4) !important;
}

.bd-button.bd-button-danger {
    background: var(--palenight-red) !important;
    border-color: var(--palenight-red) !important;
}


/* ============================================= */
/* USER AREA POPUP (Bottom Left)                */
/* ============================================= */

/* User profile popout/menu - FULL PALENIGHT THEME */
.accountProfilePopoutWrapper__8f0de,
[class*="accountProfilePopout"],
.userPopout__590e2,
.userPopoutOuter__390cb,
[class*="userPopout"],
.profilePanel_c0bea0 {
    background: var(--bg-3) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius-md) !important;
}

/* User profile popout header/banner */
.banner_c0bea0,
.profileBanner__6e540,
[class*="profileBanner"],
.userProfileOuterThemed__81bfc,
.bannerSVGWrapper_a5e6c9 {
    background: var(--bg-2) !important;
}

/* User profile popout body */
.profileBadges__6e540,
.body_c0bea0,
.userInfoSection__03c37,
[class*="userInfo"],
.avatarWrapper_c0bea0,
.avatarPositionPanel_c0bea0 {
    background: var(--bg-3) !important;
}

/* User profile text - ensure visibility */
.userText__56e23,
.username__88cdb,
.discriminator__70a7b,
.profileBadges__6e540,
[class*="bodyTitle"],
[class*="textarea"],
.nameTag_c0bea0,
.panelTitleContainer_c0bea0,
.panelTitle_c0bea0,
.panelSubtextContainer_c0bea0,
.panelSubtext_c0bea0 {
    color: var(--text-1) !important;
}

/* User profile buttons */
.actionButtons_c0bea0,
.actionButton__23cc6,
[class*="actionButton"] button,
.button_dd4f85 {
    background: var(--active) !important;
    color: var(--text-1) !important;
    border: 1px solid var(--palenight-purple) !important;
    border-radius: var(--radius-sm) !important;
}

.actionButton__23cc6:hover,
[class*="actionButton"] button:hover,
.button_dd4f85:hover {
    background: var(--accent-4) !important;
    box-shadow: 0 0 8px var(--active-2) !important;
}

/* User profile sections/dividers */
.userProfileOuter_c0bea0,
.section__8f0de,
[class*="section"],
.customStatus_c0bea0,
.note_c0bea0,
.textarea_c0bea0 {
    background: var(--bg-3) !important;
    border-color: var(--border) !important;
    color: var(--text-3) !important;
}

/* User profile input fields */
.note_c0bea0 textarea,
.textarea_c0bea0,
.input_c0bea0 {
    background: var(--bg-2) !important;
    color: var(--text-1) !important;
    border: 1px solid var(--border) !important;
}

.note_c0bea0 textarea:focus,
.textarea_c0bea0:focus,
.input_c0bea0:focus {
    border-color: var(--palenight-purple) !important;
    box-shadow: 0 0 0 2px var(--active-2) !important;
}

/* About Me and custom status text */
.customStatusText_c0bea0,
.markup_f8f345,
.bio_c0bea0,
.text_c0bea0 {
    color: var(--text-3) !important;
}

/* Member since, roles, etc. */
.profileBadges__6e540,
.role_c0bea0,
.roleDot_c0bea0,
.memberSinceContainer_c0bea0,
.listRowContent_a6b9c3 {
    color: var(--text-3) !important;
}

/* Role pills */
.role_c0bea0 {
    background: var(--bg-2) !important;
    border: 1px solid var(--border) !important;
}


/* Mention and @everyone tag styling for better readability - ONLY in messages */
.message__5126c .mention /* mention in message */,
.message__5126c a.mention /* mention link in message */,
.markup__b2d56 .mention /* markup mention */,
.markup__b2d56 a.mention {
    background-color: var(--palenight-purple) !important;
    color: var(--text-0) !important;
    padding: 2px 4px !important;
    border-radius: 3px !important;
    font-weight: 600 !important;
}

/* ============================================= */
/* STATUS INDICATORS - Palenight Colors         */
/* ============================================= */

/* Hide default Discord SVG status circles */
.svg_cc5dd2 > mask,
.svg__44b0c > rect,
.svg__44b0c > circle,
.svg__44b0c > g,
.svg__44b0c rect[mask*='url'],
.avatar__20a53 .status_a423bd rect {
    display: none;
}

/* Remove mask from foreignObject elements */
.mask__68edb > foreignObject,
.svg__44b0c > foreignObject,
.svg__2338f > foreignObject {
    mask: none;
}

/* Custom status indicator setup with Palenight colors */
.wrapper__44b0c,
.container__1ce5d {
    --online-custom: var(--online); /* #9CCC65 Palenight green */
    --dnd-custom: var(--dnd); /* #EF5350 Palenight red */
    --idle-custom: var(--idle); /* #FFCA28 Palenight yellow */
    --offline-custom: var(--offline); /* #676E95 Palenight muted */
    --streaming-custom: var(--streaming); /* #C792EA Palenight purple */
}

/* Create custom status indicators */
.wrapper__44b0c:has(rect)::after,
.container__1ce5d:has(.status_a423bd)::after {
    content: '';
    display: block;
    position: absolute;
    height: 10px;
    width: 10px;
    bottom: -2px;
    right: -2px;
    border: 2px solid var(--bg-3);
    border-radius: 50%;
    box-sizing: border-box;
}

/* Apply Palenight colors to each status */
.wrapper__44b0c:has(rect[fill='#43a25a'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(67, 162, 90)'])::after {
    background: var(--online-custom) !important;
}

.wrapper__44b0c:has(rect[fill='#d83a42'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(216, 58, 66)'])::after {
    background: var(--dnd-custom) !important;
}

.wrapper__44b0c:has(rect[fill='#ca9654'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(202, 150, 84)'])::after {
    background: var(--idle-custom) !important;
}

.wrapper__44b0c:has(rect[fill='#82838b'])::after,
.wrapper__44b0c:has(rect[fill='#747f8d'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(130, 131, 139)'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(116, 127, 141)'])::after {
    background: var(--offline-custom) !important;
}

.wrapper__44b0c:has(rect[fill='#9147ff'])::after,
.container__1ce5d:has(.status_a423bd[style*='rgb(145, 71, 255)'])::after {
    background: var(--streaming-custom) !important;
}

/* Status badges positioning */
.lowerBadge_cc5dd2 {
    border: 2px solid var(--bg-3);
    bottom: -2px;
    right: -2px;
}

.upperBadge_cc5dd2 {
    border: 2px solid var(--bg-3);
    top: -2px;
    right: -2px;
}

/* ============================================= */
/* FRIENDS LIST FIX - Remove Dark Backgrounds   */
/* ============================================= */

/* Remove dark background around users in friends list */
.peopleColumn__133bf /* friends list column */,
.peopleList__13e06 /* friends list container */ {
    background: transparent !important;
}

/* Friends list items - blend with background */
.peopleListItem_c6d4b9,
[class*="peopleListItem"] {
    background: transparent !important;
    border: none !important;
}

/* Friends list item hover - subtle highlight */
.peopleListItem_c6d4b9:hover,
[class*="peopleListItem"]:hover {
    background: var(--hover) !important;
}

/* Friends list user info area */
.userInfo_c6d4b9,
[class*="userInfo"] {
    background: transparent !important;
}

/* Friends list actions area */
.actions_c6d4b9,
[class*="listItemActions"] {
    background: transparent !important;
}

/* Pending requests and suggestions - also remove dark background */
.listRow_a6b9c3,
[class*="listRow"] {
    background: transparent !important;
}

.listRow_a6b9c3:hover,
[class*="listRow"]:hover {
    background: var(--hover) !important;
}

/* Friends tab body */
.tabBody__133bf {
    background: transparent !important;
}

/* Friends search bar */
.searchBar__3c9f8,
[class*="searchBar"] {
    background: var(--bg-3) !important;
    border: 1px solid var(--border) !important;
}
